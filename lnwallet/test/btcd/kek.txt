=== RUN   TestLightningWallet
=== PAUSE TestLightningWallet
=== CONT  TestLightningWallet
=== RUN   TestLightningWallet/btcwallet/btcd:single_funding_workflow_musig2
CHAN IS TAPROOT
CHAN IS TAPROOT
MAKING TAPROOT CHAN
pk script gen:  5120370c78e64f9cb754bd2cbcd15602bf0e4a056830c209fa7fe47c71692a0bd2d3
MAKING TAPROOT CHAN
pk script gen:  5120370c78e64f9cb754bd2cbcd15602bf0e4a056830c209fa7fe47c71692a0bd2d3
sign key:  02d5fc63d5e45822b926257591509d1f754e16f7d0323854d06db9794270b89173
sign key:  02d5fc63d5e45822b926257591509d1f754e16f7d0323854d06db9794270b89173
local nonces:  (lnwallet.MusigNoncePair) {
 LocalNonce: (*musig2.Nonces)(0x1400077c6c0)({
  PubNonce: ([66]uint8) (len=66 cap=66) {
   00000000  03 3a 4b 6e 1b 82 91 65  7a e0 9a a9 02 8b 26 83  |.:Kn...ez.....&.|
   00000010  86 ad 4c 30 9c 08 0e 87  5d 7b 06 c6 8e df 97 2e  |..L0....]{......|
   00000020  8f 02 fd 51 7e 21 b5 27  3b 01 f9 f0 89 1d 24 5c  |...Q~!.';.....$\|
   00000030  79 9c ea 03 06 01 a2 3e  1f e0 c3 8d 0d 1b 80 f1  |y......>........|
   00000040  93 fe                                             |..|
  },
  SecNonce: ([64]uint8) (len=64 cap=64) {
   00000000  f0 93 ae ff 97 99 81 2e  58 ec 35 fc 4b 24 47 ec  |........X.5.K$G.|
   00000010  34 39 70 f9 1e ef 08 22  d6 23 01 ad 23 10 7f 1f  |49p....".#..#...|
   00000020  ea 30 59 1d af b4 a8 72  a1 fb 4b d8 c1 b1 90 75  |.0Y....r..K....u|
   00000030  b4 54 65 2d d8 eb 9a 15  da b1 25 8f 99 77 b3 be  |.Te-......%..w..|
  }
 }),
 RemoteNonce: (*musig2.Nonces)(0x1400077ca20)({
  PubNonce: ([66]uint8) (len=66 cap=66) {
   00000000  02 99 c9 ca 38 27 3f d8  33 69 e2 0b b0 31 4b 83  |....8'?.3i...1K.|
   00000010  96 5c 0e 12 32 b7 60 dc  ed 97 6c 92 22 3f e9 09  |.\..2.`...l."?..|
   00000020  32 03 7e 45 0e 89 37 38  36 2c f3 06 9f 3c 42 91  |2.~E..786,...<B.|
   00000030  21 05 03 dc e2 6c ed e9  48 bd 92 86 af 4e 34 60  |!....l..H....N4`|
   00000040  3b 2f                                             |;/|
  },
  SecNonce: ([64]uint8) (len=64 cap=64) {
   00000000  e5 35 ab 39 14 b5 f1 b6  7e cc 49 66 3c 10 da a0  |.5.9....~.If<...|
   00000010  e7 18 22 b6 22 88 a4 b6  5b 11 00 10 20 d2 a2 4a  |.."."...[... ..J|
   00000020  e8 a0 c0 67 9c b0 bb a5  f0 e1 7d 67 6e 16 93 a2  |...g......}gn...|
   00000030  0b d8 25 29 e3 e2 c4 34  1f 3a e1 77 52 d2 df 5a  |..%)...4.:.wR..Z|
  }
 })
}

remote nonces:  (lnwallet.MusigNoncePair) {
 LocalNonce: (*musig2.Nonces)(0x1400077c990)({
  PubNonce: ([66]uint8) (len=66 cap=66) {
   00000000  02 ba 81 c2 c8 db bf 80  e2 d6 68 8e c1 c4 24 38  |..........h...$8|
   00000010  33 ce 1f 6f ed 75 8c 45  52 6f a6 aa a0 a6 5d be  |3..o.u.ERo....].|
   00000020  d8 02 3f 20 11 4d b1 a2  bc ee 69 f7 c1 9f 2e 48  |..? .M....i....H|
   00000030  18 49 e5 64 3e ee d9 c9  4e 84 33 ff ba 2c a9 d9  |.I.d>...N.3..,..|
   00000040  7d 37                                             |}7|
  },
  SecNonce: ([64]uint8) (len=64 cap=64) {
   00000000  6b 03 cf 62 5f 32 23 65  09 8c 9c 69 f7 9e cb 1c  |k..b_2#e...i....|
   00000010  ac 94 fc fd bd ad 74 77  9a 78 7c e3 40 d7 da a3  |......tw.x|.@...|
   00000020  7b c7 6c 9c 39 2d 2b 9c  df 69 44 24 6f d7 31 b7  |{.l.9-+..iD$o.1.|
   00000030  94 01 71 82 b4 13 26 0a  45 e3 27 23 f3 7f 48 c7  |..q...&.E.'#..H.|
  }
 }),
 RemoteNonce: (*musig2.Nonces)(0x1400077c750)({
  PubNonce: ([66]uint8) (len=66 cap=66) {
   00000000  02 a4 83 58 33 b7 69 cd  95 a2 e9 64 5e 5c 99 3a  |...X3.i....d^\.:|
   00000010  fb ed 17 c7 09 de 8a 83  80 a1 16 33 fe 8e 25 47  |...........3..%G|
   00000020  56 03 51 ea 4f 37 fd 4d  8a 02 50 5d d6 1e 93 a0  |V.Q.O7.M..P]....|
   00000030  f0 0e 50 57 04 c3 fc 57  51 e4 6a db fd 2f 81 02  |..PW...WQ.j../..|
   00000040  a6 f3                                             |..|
  },
  SecNonce: ([64]uint8) (len=64 cap=64) {
   00000000  6d a9 23 d0 97 aa ed 31  24 a1 53 47 91 3e 4a 22  |m.#....1$.SG.>J"|
   00000010  6c 67 0a c9 9f c2 27 5a  2c 79 72 b3 00 64 4b bf  |lg....'Z,yr..dK.|
   00000020  a0 b0 92 06 27 72 c6 0e  0f 67 d1 65 61 c3 4c ae  |....'r...g.ea.L.|
   00000030  a5 dc 27 19 b8 b1 52 b9  7a a7 1a a6 84 11 76 1a  |..'...R.z.....v.|
  }
 })
}

sighash sign:  79eab9db688aae9241cc7018565cde5ff2d85fa4505f917dbe11d0596f634bea
sign nonce:  ([66]uint8) (len=66 cap=66) {
 00000000  02 ba 81 c2 c8 db bf 80  e2 d6 68 8e c1 c4 24 38  |..........h...$8|
 00000010  33 ce 1f 6f ed 75 8c 45  52 6f a6 aa a0 a6 5d be  |3..o.u.ERo....].|
 00000020  d8 02 3f 20 11 4d b1 a2  bc ee 69 f7 c1 9f 2e 48  |..? .M....i....H|
 00000030  18 49 e5 64 3e ee d9 c9  4e 84 33 ff ba 2c a9 d9  |.I.d>...N.3..,..|
 00000040  7d 37                                             |}7|
}

pk script gen:  5120370c78e64f9cb754bd2cbcd15602bf0e4a056830c209fa7fe47c71692a0bd2d3
sign key:  02e78d59cebc49c8480a408a7dce39da94d859fbc0291cba640a7de227d80b549a
sign key:  02e78d59cebc49c8480a408a7dce39da94d859fbc0291cba640a7de227d80b549a
local nonces:  (lnwallet.MusigNoncePair) {
 LocalNonce: (*musig2.Nonces)(0x1400077c990)({
  PubNonce: ([66]uint8) (len=66 cap=66) {
   00000000  02 ba 81 c2 c8 db bf 80  e2 d6 68 8e c1 c4 24 38  |..........h...$8|
   00000010  33 ce 1f 6f ed 75 8c 45  52 6f a6 aa a0 a6 5d be  |3..o.u.ERo....].|
   00000020  d8 02 3f 20 11 4d b1 a2  bc ee 69 f7 c1 9f 2e 48  |..? .M....i....H|
   00000030  18 49 e5 64 3e ee d9 c9  4e 84 33 ff ba 2c a9 d9  |.I.d>...N.3..,..|
   00000040  7d 37                                             |}7|
  },
  SecNonce: ([64]uint8) (len=64 cap=64) {
   00000000  6b 03 cf 62 5f 32 23 65  09 8c 9c 69 f7 9e cb 1c  |k..b_2#e...i....|
   00000010  ac 94 fc fd bd ad 74 77  9a 78 7c e3 40 d7 da a3  |......tw.x|.@...|
   00000020  7b c7 6c 9c 39 2d 2b 9c  df 69 44 24 6f d7 31 b7  |{.l.9-+..iD$o.1.|
   00000030  94 01 71 82 b4 13 26 0a  45 e3 27 23 f3 7f 48 c7  |..q...&.E.'#..H.|
  }
 }),
 RemoteNonce: (*musig2.Nonces)(0x1400077c750)({
  PubNonce: ([66]uint8) (len=66 cap=66) {
   00000000  02 a4 83 58 33 b7 69 cd  95 a2 e9 64 5e 5c 99 3a  |...X3.i....d^\.:|
   00000010  fb ed 17 c7 09 de 8a 83  80 a1 16 33 fe 8e 25 47  |...........3..%G|
   00000020  56 03 51 ea 4f 37 fd 4d  8a 02 50 5d d6 1e 93 a0  |V.Q.O7.M..P]....|
   00000030  f0 0e 50 57 04 c3 fc 57  51 e4 6a db fd 2f 81 02  |..PW...WQ.j../..|
   00000040  a6 f3                                             |..|
  },
  SecNonce: ([64]uint8) (len=64 cap=64) {
   00000000  6d a9 23 d0 97 aa ed 31  24 a1 53 47 91 3e 4a 22  |m.#....1$.SG.>J"|
   00000010  6c 67 0a c9 9f c2 27 5a  2c 79 72 b3 00 64 4b bf  |lg....'Z,yr..dK.|
   00000020  a0 b0 92 06 27 72 c6 0e  0f 67 d1 65 61 c3 4c ae  |....'r...g.ea.L.|
   00000030  a5 dc 27 19 b8 b1 52 b9  7a a7 1a a6 84 11 76 1a  |..'...R.z.....v.|
  }
 })
}

remote nonces:  (lnwallet.MusigNoncePair) {
 LocalNonce: (*musig2.Nonces)(0x1400077c6c0)({
  PubNonce: ([66]uint8) (len=66 cap=66) {
   00000000  03 3a 4b 6e 1b 82 91 65  7a e0 9a a9 02 8b 26 83  |.:Kn...ez.....&.|
   00000010  86 ad 4c 30 9c 08 0e 87  5d 7b 06 c6 8e df 97 2e  |..L0....]{......|
   00000020  8f 02 fd 51 7e 21 b5 27  3b 01 f9 f0 89 1d 24 5c  |...Q~!.';.....$\|
   00000030  79 9c ea 03 06 01 a2 3e  1f e0 c3 8d 0d 1b 80 f1  |y......>........|
   00000040  93 fe                                             |..|
  },
  SecNonce: ([64]uint8) (len=64 cap=64) {
   00000000  f0 93 ae ff 97 99 81 2e  58 ec 35 fc 4b 24 47 ec  |........X.5.K$G.|
   00000010  34 39 70 f9 1e ef 08 22  d6 23 01 ad 23 10 7f 1f  |49p....".#..#...|
   00000020  ea 30 59 1d af b4 a8 72  a1 fb 4b d8 c1 b1 90 75  |.0Y....r..K....u|
   00000030  b4 54 65 2d d8 eb 9a 15  da b1 25 8f 99 77 b3 be  |.Te-......%..w..|
  }
 }),
 RemoteNonce: (*musig2.Nonces)(0x1400077ca20)({
  PubNonce: ([66]uint8) (len=66 cap=66) {
   00000000  02 99 c9 ca 38 27 3f d8  33 69 e2 0b b0 31 4b 83  |....8'?.3i...1K.|
   00000010  96 5c 0e 12 32 b7 60 dc  ed 97 6c 92 22 3f e9 09  |.\..2.`...l."?..|
   00000020  32 03 7e 45 0e 89 37 38  36 2c f3 06 9f 3c 42 91  |2.~E..786,...<B.|
   00000030  21 05 03 dc e2 6c ed e9  48 bd 92 86 af 4e 34 60  |!....l..H....N4`|
   00000040  3b 2f                                             |;/|
  },
  SecNonce: ([64]uint8) (len=64 cap=64) {
   00000000  e5 35 ab 39 14 b5 f1 b6  7e cc 49 66 3c 10 da a0  |.5.9....~.If<...|
   00000010  e7 18 22 b6 22 88 a4 b6  5b 11 00 10 20 d2 a2 4a  |.."."...[... ..J|
   00000020  e8 a0 c0 67 9c b0 bb a5  f0 e1 7d 67 6e 16 93 a2  |...g......}gn...|
   00000030  0b d8 25 29 e3 e2 c4 34  1f 3a e1 77 52 d2 df 5a  |..%)...4.:.wR..Z|
  }
 })
}

verify key:  02d5fc63d5e45822b926257591509d1f754e16f7d0323854d06db9794270b89173
sighash verify:  79eab9db688aae9241cc7018565cde5ff2d85fa4505f917dbe11d0596f634bea
verify nonce:  ([66]uint8) (len=66 cap=66) {
 00000000  02 a4 83 58 33 b7 69 cd  95 a2 e9 64 5e 5c 99 3a  |...X3.i....d^\.:|
 00000010  fb ed 17 c7 09 de 8a 83  80 a1 16 33 fe 8e 25 47  |...........3..%G|
 00000020  56 03 51 ea 4f 37 fd 4d  8a 02 50 5d d6 1e 93 a0  |V.Q.O7.M..P]....|
 00000030  f0 0e 50 57 04 c3 fc 57  51 e4 6a db fd 2f 81 02  |..PW...WQ.j../..|
 00000040  a6 f3                                             |..|
}

    test_interface.go:973: 
        	Error Trace:	test_interface.go:973
        	            				test_interface.go:2756
        	            				test_interface.go:3465
        	Error:      	Received unexpected error:
        	            	invalid partial commit sig
        	Test:       	TestLightningWallet/btcwallet/btcd:single_funding_workflow_musig2
        	Messages:   	bob unable to consume single reservation
--- FAIL: TestLightningWallet (14.23s)
    --- FAIL: TestLightningWallet/btcwallet/btcd:single_funding_workflow_musig2 (0.93s)
FAIL
exit status 1
FAIL	github.com/lightningnetwork/lnd/lnwallet/test/btcd	14.625s
